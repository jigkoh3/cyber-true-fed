<div class="container" id="migratePostToPreContent">
    <div class="content-top">
    </div>
    <div class="content m_content">
        <div class="col-md-1"></div>
        <div class="col-md-11">
            <div ng-include="template.header"></div>
            
            <div class="clearfix"></div>
            <h1 class="content-title">เปลี่ยนจากเเติมเงินเป็นรายเดือน</h1>
            <div class="content-body">
                <div ng-include="template.customerprofile" onload="onCustomerProfileTemplateLoaded()"></div>
                <h4>ผู้จดทะเบียนรายเดือน</h4>
                <div class="well" style="background-color:#ffffff;">
                    <!--Update-->
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>ประเภทลูกค้า<span style="color:red;">*</span></label>
                                <div data-toggle="buttons" style="width: 120px;" class="btn-group btn-group-justified">
                                    <label class="btn btn-default active" ng-click="changeType('O')">
                                        <input type="radio" name="type" ng-model="customerType" value="N"> บุคคลธรรมดา
                                    </label>
                                    <!--<label class="btn btn-default disabled" ng-click="changeType('B')">
                                        <input type="radio" name="type" ng-model="customerType" value="B"> นิติบุคคล (B)
                                    </label>
                                    <label class="btn btn-default disabled" ng-click="changeType('C')">
                                        <input type="radio" name="type" ng-model="customerType" value="C"> นิติบุคคล (C)
                                    </label>-->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 right">
                                <!--<div class="camera-s">
                                    <a class="btn btn-camera">
                                        <i class="fa fa-camera fa-lg"></i> ถ่ายรูปติดบัตร
                                    </a>
                                </div>-->
                            <button type="button"
                                    href="#modal-ReadCamera"
                                    ng-show="isCustomerProfile && shopType=='1' && getAuthen['isSecondAuthen'] == true"
                                    ng-click="initWebCamLastest()"
                                    onclick="return false"
                                    data-toggle="modal"
                                    class="btn btn-camera">
                                <i class="fa fa-camera fa-lg"></i> ถ่ายรูปติดบัตร
                            </button>
                            
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group imp">
                                <label>หมายเลขบัตรประชาชน / พาสปอร์ต </label>
                                <input ng-numeric-input type="text" id="citizenID3" ng-model="data.customerProfile['id-number']" ng-disabled="!getSIMDataFailed && !isLastestUser" class="form-control" maxlength="13">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <!-- id-type -->
                                <label>ประเภทของบัตร <span style="color:red;">*</span></label>
                                <select class="form-control" ng-model="data.customerProfile['id-type']" ng-disabled="!getSIMDataFailed && !isLastestUser">
                                    <option ng-repeat="option in cardTypeOptions" value="{{option.value}}">{{option["description"]}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>เลขที่ประจำตัวผู้เสียภาษี<span style="color:red;">*</span> </label>
                                <input name="taxIds"
                                       type="text"
                                       ng-model="data.customerProfile['tax-id']" ng-disabled="!getSIMDataFailed && !isLastestUser"
                                       id="taxId3"
                                       placeholder=""
                                       class="form-control numberic" maxlength="13" required>
                                <!--<span class="error" style="color:red;" ng-show="newcustomers.taxIds.$error.required">
                                    Required.
                                </span>-->
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>สาขาที่<span style="color:red;">*</span> </label>
                                <input type="text" ng-disabled="!getSIMDataFailed" name="branchid" ng-model="data.customerProfile['branch-code']" placeholder="00000" maxlength="5" class="form-control numberic" required>
                                <!--<span class="error" style="color:red;" ng-show="newcustomers.branchid.$error.required">
                                    Required.
                                </span>-->
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>คำนำหน้า <span style="color:red;">*</span></label>
                                <div id="placeholders">
                                    <select class="form-control" ng-model="data.customerProfile['title-code']" ng-disabled="!getSIMDataFailed && !isLastestUser">
                                        <option ng-repeat="option in titleTypeListx" value="{{option.value}}">{{option["th-description"]}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>ชื่อ <span style="color:red;">*</span></label>
                                <input type="text" id="firstNameTH3" ng-model="data.customerProfile['firstname']" class="form-control" ng-disabled="!getSIMDataFailed && !isLastestUser">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>นามสกุล <span style="color:red;">*</span></label>
                                <input type="text" id="lastNameTH3" ng-model="data.customerProfile['lastname']" class="form-control" ng-disabled="!getSIMDataFailed && !isLastestUser">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>เพศ <span style="color:red;">*</span></label>
                                <div id="placeholders">
                                    <select class="form-control" style="width:100px;" ng-model="data.customerProfile['gender']" ng-disabled="!getSIMDataFailed && !isLastestUser">
                                        <option ng-repeat="option in genderTypeList" value="{{option.value}}">{{option["th-description"]}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group has-feedback">
                                <label>วัน/เดือน/ปีเกิด <span style="color:red;">*</span></label>
                                <input type="text" id="birthDate" class="form-control date-picker" ng-model="data.customerProfile['birthdate']" ng-disabled="!getSIMDataFailed && !isLastestUser">
                                <span class="form-control-feedback is-bound"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group has-feedback">
                                <label>วันหมดอายุบัตร <span style="color:red;">*</span></label>
                                <input id="expireDate" type="text" class="form-control date-picker" ng-model="data.customerProfile['id-expire-date']" ng-disabled="isIdCardExpired(data.customerProfile['id-expire-date'])">
                                <span class="form-control-feedback is-bound"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
                <h4>ข้อมูลหมายเลข</h4>
                <div class="well">
                    <!-- <div class="row">
                        <div class="col-md-12" ng-hide="shopType=='1' && getAuthen['isSecondAuthen'] == true && getAuthen.shopcodes.length == 1">
                            <div class="col-md-3" style=" text-align: right; top: 5px;">
                                <p></p>
                                <label>
                                Shop Code/Dealer Code 
                                <span style="color:red;">*</span></label>
                            </div>
                            <div class="col-md-4" ng-show="getAuthen.shopcodes.length>1">
                                <p></p>
                                <select class="form-control"
                                        ng-model="partnerCode"
                                        ng-blur="onCheckInputForVerify()"
                                        ng-disabled="!isLastestUser">
                                    <option ng-repeat="item in getAuthen.shopcodes" value="{{item}}">
                                        {{item}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-4" ng-show="getAuthen.shopcodes.length<=1">
                                <p></p>
                                <input type="text"
                                       id="txtPartnerCode"
                                       name="partnerCode"
                                       ng-model="partnerCode"
                                       ng-keyup="onInputShopCode()"
                                       class="form-control"
                                       ng-disabled="(getAuthen.shopcodes.length==1) || !isLastestUser"
                                       maxlength="8" required>
                            </div>
                        </div>
                    </div> -->

                    {{partnerCode}}
                    <div class="row">
                        <div class="col-md-12" ng-hide="shopType=='1' && getAuthen['isSecondAuthen'] == true && getAuthen.shopcodes.length == 1">
                            <div class="col-md-3" style=" text-align: right; top: 5px;">
                                <p></p>
                                <label>
                                Shop Code/Dealer Code 
                                <span style="color:red;">*</span></label>
                            </div>
                            <div class="col-md-4" ng-show="getAuthen.shopcodes.length>1">
                                <p></p>
                                <select class="form-control"
                                        ng-model="partnerCode"
                                        ng-disabled="!isLastestUser">
                                    <option value="">-- กรุณาเลือก --</option>
                                    <option ng-repeat="item in getAuthen.shopcodes" value="{{item}}">
                                        {{item}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-4" ng-show="getAuthen.shopcodes.length<=1">
                                <p></p>
                                <input type="text"
                                       id="txtPartnerCode"
                                       name="partnerCode"
                                       ng-model="partnerCode"
                                       class="form-control"
                                       ng-disabled="(getAuthen.shopcodes.length==1) || !isLastestUser"
                                       maxlength="8" required>
                            </div>


                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="col-md-3" style=" text-align: right; top: 5px;">
                                    <p></p>
                                    <label>รายการส่งเสริมการขาย</label>
                                </div>
                                <div class="col-md-4">
                                    <p></p>
                                    <select class="form-control" ng-model="selectedProPosition">
                                        <option value="">-- กรุณาเลือก --</option>
                                        <option ng-repeat="item in proPositionList" value="{{ item['proposition-code'] }}">
                                            {{ item['proposition-code'] }} : {{ item.description }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label>
                                        <input type="button"
                                               ng-hide="isVerify"
                                               ng-disabled="!isCheckInputForVerify"
                                               ng-click="onVerify()"
                                               value="Verify"
                                               class="btn btn-success">
                                    </label>

                                </div>
                                <div class="col-md-3">
                                    <span style="color:red;" ng-show="showApprovCode">* Approve code by referral*</span>
                                </div>
                                <div class="col-md-2" ng-form="onVerify()">
                                    <input type="text"
                                           name="approvecode"
                                           ng-model="approveCode"
                                           ng-show="showApprovCode"
                                           ng-keyup="$event.keyCode==13 && onVerify()"
                                           class="form-control"
                                           maxlength="10"
                                           style="width:150px" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p></p>
                    <div class="row" ng-submit="funcEvent()">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="col-md-3" style=" text-align: right; top: 5px;">
                                    <label>Price Plan <span style="color:red;">*</span></label>
                                </div>
                                <div class="col-md-4">
                                    <input type="text" ng-model="selectedPricePlan.description" readonly class="form-control">
                                </div>
                                <div class="col-md-3">
                                    <input type="text" ng-keyup="$event.keyCode == 13 && funcEvent()" ng-model="pricePlanFilter" placeholder="ค้นหา" class="form-control">
                                </div>
                                <div class="col-md-1">
                                    <button href="#modalPricePlan" id="modalnewpriceplan" class="btn" onclick="return false;" data-toggle="modal" style="background-color: #5cb85c; border-color: #4cae4c; ">
                                        <span style="color:white;">...</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p></p>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="col-md-3" style=" text-align: right; top: 5px;">
                                    <label>ค่าบริการรายเดือนก่อนหักส่วนลด </label>
                                </div>
                                <div class="col-md-4">
                                    <input type="text" readonly ng-model="selectedPricePlan.rc" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <p></p>

                    <div ng-include="template.newparampriceplan" scope="" onload=""></div>

                    <div ng-show="isVerify" class="row">
                        <div class="col-md-12">
                            <div class="checkbox checkbox-circle2 checkbox-inline authorize">
                                <input type="checkbox" id="changCheck" ng-click="customerUsageNo = !customerUsageNo" class="styled">
                                <label for="changCheck"><b>ระบุผู้ใช้หมายเลข </b></label>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div ng-hide="!customerUsageNo">
                        <div ng-show="(customerType=='B') || (customerType=='C')">
                            <div class="row">
                                <div class="col-md-4">
                                    <div data-toggle="buttons" class="btn-group btn-group-justified">
                                        <label class="btn btn-default active" ng-click="changeReqType('O')">
                                            <input type="radio" ng-model="businessType" value="O"> บริษัท/ที่ทำงาน
                                        </label>
                                        <label class="btn btn-default" ng-click="changeReqType('P')">
                                            <input type="radio" ng-model="businessType" value="P"> บุคคลธรรมดา
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div ng-show="businessType=='O'" class="row">
                                <div class="col-md-4">
                                    <div class="form-group has-feedback">
                                        <label>บริษัท/ที่ทำงาน <span style="color:red;">*</span></label>
                                        <input type="text" placeholder="" class="form-control" />

                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group has-feedback">
                                        <label>SMS Language <span style="color:red">*</span></label>
                                        <select class="form-control">
                                            <option value="Th">ไทย</option>
                                            <option value="En">อังกฤษ</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="row">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>คำนำหน้า <span style="color:red;">*</span></label>
                                        <div id="placeholders">
                                            <select class="form-control" ng-model="data.customerProfile['title-code']" ng-disabled="!getSIMDataFailed">
                                                <option ng-repeat="option in titleTypeListx" value="{{option.value}}">{{option["th-description"]}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>ชื่อ <span style="color:red;">*</span></label>
                                        <input type="text" id="firstNameTH3" ng-model="data.customerProfile['firstname']" class="form-control" ng-disabled="!getSIMDataFailed">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>นามสกุล <span style="color:red;">*</span></label>
                                        <input type="text" id="lastNameTH3" ng-model="data.customerProfile['lastname']" class="form-control" ng-disabled="!getSIMDataFailed">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>เพศ <span style="color:red;">*</span></label>
                                        <div id="placeholders">
                                            <select class="form-control" style="width:100px;" ng-model="data.customerProfile['gender']" ng-disabled="!getSIMDataFailed">
                                                <option ng-repeat="option in genderTypeList" value="{{option.value}}">{{option["th-description"]}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group has-feedback">
                                        <label>วัน/เดือน/ปีเกิด <span style="color:red;">*</span></label>
                                        <input type="text" id="birthDate" class="form-control date-picker" ng-model="data.customerProfile['birthdate']" ng-disabled="!getSIMDataFailed">
                                        <span class="form-control-feedback is-bound"><i class="fa fa-calendar"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group has-feedback">
                                        <label>SMS Language<span style="color:red;">*</span></label>
                                        <select ng-model="data.customerProfile['language']" id="smsLanguageRegisterd" class="form-control">
                                            <option value="TH" selected>ไทย</option>
                                            <option value="EN">อังกฤษ</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="well" style="background-color:#ffffff;">
                    <div class="row">
                        <div class="form-group">
                            <label class="col-md-3">
                                <h4>สร้างข้อมูลลูกค้าไปที่ <span style="color:red;">*</span></h4>
                            </label>

                            <div class="col-md-5">
                                <p></p>
                                <div class="col-md-4">
                                    <label style="cursor:pointer;">
                                        <input type="radio"
                                               style="cursor:pointer;"
                                               name="custom"
                                               ng-disabled="!isLastestAdress"
                                               ng-change="changeType('O')"
                                               value="O" ng-model="customerType">
                                        ลูกค้าเก่า
                                    </label>
                                </div>
                                <div class="col-md-8" ng-hide="customerStatusN =='N'">
                                    <div class="checkbox checkbox-circle2 checkbox-inline authorize">
                                        <input type="checkbox" class="styled" id="openService" ng-model="changeOpenservice" ng-change="changeOldAddress(changeOpenservice)">
                                        <label for="openService">ระบุลูกค้าในการเปิดบริการ</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <p></p>
                                <div class="col-md-6">
                                    <label style="cursor:pointer;">
                                        <input type="radio"
                                               style="cursor:pointer;"
                                               ng-disabled="isLastestAdress"
                                               name="custom"
                                               ng-change="changeType('N')"
                                               value="N"
                                               ng-model="customerStatusN">
                                        ลูกค้าใหม่
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-show="(customerType=='O' && changeOpenservice)" ng-if="lastestData && lastestData['installedProducts'] && lastestData['installedProducts'].length">
                        <div class="form-group">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th><span style="color:green;"> เลขที่ลูกค้า</span></th>
                                            <th><span style="color:green;"> คำนำหน้า</span></th>
                                            <th><span style="color:green;"> ชื่อ</span></th>
                                            <th><span style="color:green;"> นามสกุล</span></th>
                                            <th><span style="color:green;"> วันที่สร้างข้อมูลลูกค้า</span></th>
                                            <th><span style="color:green;"> รอบบิล</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in lastestData['installedProducts']">
                                            <td><input type="radio" name="owner" ng-change="updateMailAddress('1')" value="{{$index}}" ng-model="rowNoSelected" checked="checked" /></td>
                                            <td>{{lastestData.customerProfile['customer-id']}}</td>
                                            <td>{{lastestData.customerProfile['title']}}</td>
                                            <td>{{lastestData.customerProfile['firstname']}}</td>
                                            <td>{{lastestData.customerProfile['lastname']}}</td>
                                            <td>&nbsp;</td>
                                            <td>{{data['bill-cycle-date']}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <h4>ที่อยู่จดทะเบียน</h4>
                <div class="well" style="background-color:#ffffff;" ng-form="customerspre">
                    <div class="row" style="margin-bottom:10px;">
                        <div class="col-md-12">
                            <div class="form-group">
                                <span>
                                        <button type="button" ng-click="useSameAddressAsCard()" class="btn btn-danger btn_address">
                                            ใช้ที่อยู่เดียวกับที่อยู่ตามบัตร
                                        </button>
                                    </span>
                                <a href="" ng-click="clearAddress()" style="position:relative;top:5px;margin-left:10px;">
                                    <span>
                                            <i class="fa fa-trash-o fa-2x"></i>
                                        </span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group imp">
                                <label>รหัสไปรษณีย์ </label>
                                <input type="text" ng-numeric-input ng-model="data.customerAddress['zip']" class="form-control" maxlength="{{ zipLength }}" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.postcodes.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group imp">
                                <label>จังหวัด </label>
                                <input type="text" ng-model="data.customerAddress['province']" class="form-control" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.provinces.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group imp">
                                <label>เขต / อำเภอ </label>
                                <input type="text" ng-model="data.customerAddress['district']" class="form-control" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.aumpers.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group imp">
                                <label>แขวง / ตำบล </label>
                                <input type="text" ng-model="data.customerAddress['sub-district']" class="form-control" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.tumbols.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span>บ้านเลขที่ <!-- <span style="color:red;">*</span> --></span>&nbsp;&nbsp;&nbsp;&nbsp;
                                <!-- <div class="checkbox checkbox-circle2 checkbox-inline">
                                        <input type="checkbox" ng-model="noHomeNumber" class="styled">
                                        <label><span style="position:relative;top:3px;left:-10px;">ไม่มีบ้านเลขที่</span></label>
                                    </div> -->
                                <input type="text" ng-model="data.customerAddress['number']" ng-disabled="noHomeNumber" name="homenos" class="form-control numberic" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.homenos.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span>หมู่ที่ <!-- <span style="color:red;">*</span> --></span>&nbsp;&nbsp;&nbsp;&nbsp;
                                <!-- <div class="checkbox checkbox-circle2 checkbox-inline">
                                        <input type="checkbox" ng-model="noHomeMoo" class="styled">
                                        <label><span style="position:relative;top:3px;left:-10px;">ไม่มีหมู่ที่</span></label>
                                    </div> -->
                                <input type="text" ng-model="data.customerAddress['moo']" ng-disabled="noHomeMoo" class="form-control" required>
                                <!-- <span class="error" style="color:red;" ng-show="customerspre.homemoos.$error.required">
                                        Required!
                                    </span> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>หมู่บ้าน</label>
                                <input type="text" class="form-control numberic" ng-model="data.customerAddress['village']">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>อาคาร</label>
                                <input type="text" class="form-control" ng-model="data.customerAddress['building-name']">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>ชั้น</label>
                                <input type="text" class="form-control" ng-model="data.customerAddress['building-floor']">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>เลขห้อง</label>
                                <input type="text" class="form-control" ng-model="data.customerAddress['building-room']">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>ซอย</label>
                                <input type="text" class="form-control" ng-model="data.customerAddress['soi']">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group imp">
                                <label>ถนน</label>
                                <input type="text" class="form-control" ng-model="data.customerAddress['street']" required>
                                <span class="error" style="color:red;" ng-show="customerspre.roadcode.$error.required">
                                        Required!
                                    </span>
                            </div>
                        </div>
                    </div>
                </div>
                <h4></h4>
                <!-- end authorize -->
                <div ng-include="template.currentpriceplan" scope="" onload=""></div>
            </div>
            
                <h4>ใบแจ้งค่าบริการและประเภทการรับชำระ</h4>
                <div ng-show="isVerify" class="well">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-4 control-label">การส่งใบแจ้งค่าบริการ<span style="color:red;">*</span></label>
                            <div class="col-md-4" ng-form="billservice">
                                <select class="form-control"
                                        name="billservices"
                                        ng-model="blah"
                                        ng-options="key as value for (key , value) in dataSlip" required></select>
                            </div>
                        </div>
                        <div class="form-group" ng-hide="blah=='S'||blah=='P'" ng-form="email">
                            <label class="col-md-5 control-label">E-mail <span style="color:red;">*</span></label>
                            <div class="col-md-3">
                                <input type="text"
                                       id="idBillPaymentEmail"
                                       name="emails"
                                       ng-model="billPayment.email"
                                       ng-blur="onCheckEmail()"
                                       class="form-control" required>
                            </div>
                        </div>
                        <div class="form-group" ng-hide="blah=='E'||blah=='P'" ng-form="ngsmss">
                            <label class="col-md-5 control-label">SMS <span style="color:red;">*</span></label>
                            <div class="col-md-3">
                                <input type="text" 
                                       id="txtBillPaymentSmss"
                                       name="smss" 
                                       ng-model="billPayment.smss" 
                                       class="form-control" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">ประเภทการชำระเงิน <span style="color:red;">*</span></label>
                            <div class="col-md-4">
                                <select class="form-control">
                                    <option>เงินสด</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">ภาษาในการส่งบิล <span style="color:red;">*</span></label>
                            <div class="col-md-4">
                                <select class="form-control" ng-model="billPayment.accountLang">
                                    <option value="TH">ไทย</option>
                                    <option value="EN">อังกฤษ</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" ng-show="(customerType=='B' || customerType=='C') && shopType=='0'">
                            <div ng-show="shopType=='0'">
                                <label class="col-md-4 control-label">รอบบิล <span style="color:red;">*</span></label>
                                <div class="col-md-4">
                                    <select class="form-control">
                                        <option>ระบุ </option>
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <h4>ข้อมูลติดต่อลูกค้า</h4>
                <div class="well" style="background-color:#ffffff;">
                    <div class="row">

                        <div class="col-md-3">
                            <div class="form-group" ng-form="tellNos">
                                <label>เบอร์อื่นที่สามารถติดต่อได้<span style="color:red;">*</span></label>
                                <input type="text"
                                       id="txtcontactNonumber"
                                       name="tellNo"
                                       maxlength="10"
                                       ng-model="contactNo.number"
                                       class="form-control telephoneZero" 
                                       ng-keyup="onInputTelZero($event.keyCode); 
                                       onInputTel($event.keyCode)"
                                       ng-blur="onBlurTel()"
                                       required>
                                <!--<span class="error" style="color:red;" ng-show="tellNos.tellNo.$error.required">
                                    Required.
                                </span>-->
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <label>ต่อ</label>
                                <input type="text" class="form-control telephone" ng-model="contactNo.continued"
                                 ng-keyup="onNumberTelTo($event.keyCode)"
                                 ng-blur="onNumberTelTo()">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>เบอร์มือถือ</label>
                                <input type="text" class="form-control telephoneZero" ng-model="data.customerProfile['contact-mobile-number']" maxlength="10"
                                ng-keyup="onInputTelZero2($event.keyCode); 
                                onInputTel2($event.keyCode)"
                                ng-blur="onBlurTel2()">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group ">
                                <label>Email</label>
                                <input type="text" 
                                       id="txtCustomerContactEmail"
                                       class="form-control" 
                                       ng-blur="onBlurContactEmail()" 
                                       ng-model="data.customerProfile['contact-email']" 
                                       maxlength="50">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <span ng-show="isNumberTel || isNumberTelLength || isNumberTelZero" style="color:red;">
                                ต้องเป็นตัวเลข 9-10หลัก และขึ้นต้นด้วย 0
                            </span>
                        </div>
                        <div class="col-md-2">
                            <span ng-show="isNumberTelTo" style="color:red;">
                                กรอกเฉพาะตัวเลขเท่านั้น
                            </span>
                        </div>
                        <div class="col-md-5 " >
                            <span ng-show="isNumberTel2 || isNumberTelLength2 || isNumberTelZero2" style="color:red;">
                                ต้องเป็นตัวเลข 10หลัก และขึ้นต้นด้วย 0
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group ">
                                <label>ภาษาที่ใช้ติดต่อ</label>
                                <select class="form-control" ng-model="data.customerProfile['language']">
                                    <option value="TH">ไทย</option>
                                    <option value="EN">อังกฤษ</option>
                                </select>
                            </div>
                        </div>
                        <!-- <div class="col-md-4">

                        </div> -->
                    </div>
                </div>
            <!--<div ng-include="template.reasonmemo" scope="" onload=""></div>-->
            <h4>Reason & Memo</h4>
            <div class="well">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label class="col-md-4 control-label">Memo</label>
                        <div class="col-md-4">
                            <textarea class="form-control" ng-model="memo" name="message" style="width:100%;height:70px;"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!--<div ng-include="template.effectivepriceplan" scope="" onload=""></div>-->
            <div id="modal-pdf" tabindex="-1" class="modal fade" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog" style="width:70%;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4>
                                    PDF
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </h4>
                        </div>
                        <div class="modal-body">
                            <iframe id="iframePDF" src="" style="width: 100%; height: 400px;" frameborder="0" scrolling="no">
                                <p>It appears your web browser doesn't support iframes.</p>
                            </iframe>
                        </div>
                        
                        <div class="modal-footer">
                            <span ng-show="(shopType === '1' && getAuthen['isSecondAuthen'] === false) || shopType === '0'">
                                <input type="button" href="#modal-pdf" value="ยืนยันและพิมพ์เอกสาร" data-toggle="modal" onclick="setTimeout(function () { document.getElementById('iframePDF').src = 'javascript:window.print();' }, 2000); setTimeout(function () { document.getElementById('iframePDF').src = 'PDFs/AfterSaleReport.pdf' }, 2500);" ng-click="submit()" class="btn btn-success" />
                            </span>
                            <span>
                                <input type="button" href="#modal-pdf" value="ยืนยัน" data-toggle="modal" ng-click="submit()" class="btn btn-success" />
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="modal-SecoundAuthen" tabindex="-1" class="modal fade" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" id="btnSecoundAuthenClose" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="blue bigger">
                                    <i class="ace-icon fa fa-lock grey"></i>
                                    Secound Authen
                                </h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-xs-4">
                                    Username :
                                    <input type="text" placeholder="Username" class="form-control">
                                </div>
                                <div class="col-xs-4">
                                    Password :
                                    <input type="text" placeholder="Password" class="form-control">
                                </div>
                                <div class="col-xs-4 ">
                                    <a href="#modal-ReadCard3" onclick="return false;" data-dismiss="modal" data-toggle="modal" class="btn btn-success">Ok</a>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                        </div>
                    </div>
                </div>
            </div>
            <div id="modal-ReadCard3" tabindex="-1" class="modal fade" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" id="btnReadCard3Close" class="close" onclick="" data-dismiss="modal">&times;</button>
                            <h4 class="blue bigger">
                                    <i class="ace-icon fa fa-user  grey"></i>
                                    ผู้จดทะเบียนเติมเงิน
                                </h4>
                            <hr />
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-xs-3">ระบุ Card / Passport : </div>
                                <div class="col-xs-5">
                                    <input type="text" id="CitizenID33" placeholder="" ng-model="CitizenID3" class="form-control">
                                </div>
                                <div class="col-xs-4">
                                    <!--<input type="submit" value="อ่านบัตร" class="btn btn-danger" ng-click="ReadCardMockUp('3389225969739')">-->
                                    <input type="submit" value="อ่านบัตร" class="btn btn-danger" onclick="$('#ReadAuthorize').val('readNewOwnerReadCard'); ReadCard('ReadP');">
                                    <input type="submit" value="ใส่ข้อมูล" class="btn btn-danger" onclick="setTimeout(function () { $('#CitizenID33').select(); }, 100);" ng-click="manualInputReadCard()">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-3"></div>
                                <div class="col-xs-5">
                                    <!--<div id="loadingReadCard">
                                            <i class="fa fa-spin fa-spinner"></i>
                                            กำลังอ่านข้อมูล...
                                        </div>
                                        <span id="unMatch" style="color:red;">*ไม่พบหมายเลขบัตรนี้ในฐานข้อมูล</span>
                                        <span id="readCardTimeOut" style="color:red;display:none;">*ไม่พบเครื่องอ่านบัตร</span>-->
                                </div>
                                <div class="col-xs-4"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 form-buttons">
                <div class="form-group">
                    <input ng-if="shopType === '0'" type="submit" value="พิมพ์" class="btn btn-success" ng-click="openPDFDialog()"  />
                    <input ng-if="shopType === '1'" type="submit" value="พิมพ์" class="btn btn-success" ng-click="openPDFDialog()"  />
                    <input id="modalPDFOpener" type="hidden" href="#modal-pdf" data-toggle="modal" />
                    <input type="reset" value="ยกเลิก" class="btn btn-cancel" onclick="window.close()" />
                </div>
            </div>
        </div>
    </div>
</div>
<div id="modalPricePlan" tabindex="-1" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <div class="col-md-12">
                    <input type="text" placeholder="ค้นหา" ng-model="pricePlanFilter" id="ppfilter2" class="form-control pricePlanFilter">
                </div>
                &nbsp;
                <div class="table-responsive">
                    <table class="table" style="margin-bottom: 0px;">
                        <tr>
                            <th colspan="5">
                                <label class="col-xs-12">
                                    <div class="row">
                                        <div class="col-xs-1">&nbsp;</div>
                                        <div class="col-xs-9"><span style="color:green;"><h6>Price Plan</h6></span></div>
                                        <div class="col-xs-2"><span style="color:green;text-align:center;"><h6>RC</h6></span></div>
                                        <!--<div class="col-xs-3"><span style="color:green;"><h6>รายการส่งเสริมการขาย</h6></span></div>-->
                                    </div>
                                </label>
                            </th>
                        </tr>

                        <tr dir-paginate="pp in pricePlanList | filter:pricePlanFilter | orderBy:'name'| itemsPerPage: pageSize"
                            pagination-id="PPList"
                            current-page="currentPage">
                            <th colspan="5" style="padding: 5px; padding-bottom: 0px;">
                                <label class="col-xs-12" style="cursor:pointer;">
                                    <div class="row">
                                        <div class="col-xs-1">
                                            <input name="pricelsx"
                                                   type="radio"
                                                   ng-value="pp"
                                                   ng-model="dirty.selectedPricePlan" class="radioPriceplan" />
                                        </div>
                                        <div class="col-xs-9">{{pp.name}}: {{pp.description}}</div>
                                        <div class="col-xs-2 text-center">{{pp.rc | number}}</div>
                                        <!--<div class="col-xs-3" style="text-align:center;">{{pp.promotion}}</div>-->
                                    </div>
                                </label>
                            </th>
                        </tr>

                        <tr>
                            <td id="divPage" colspan="5" class="text-center" style="margin-bottom: 0px;">
                                <style>
                                    .pagination {
                                        margin: 0;
                                    }
                                </style>
                                <div dir-pagination-controls pagination-id="PPList" boundary-links="true" template-url="lib/paging/dirPagination.tpl.html?v={{runTime}}"></div>
                            </td>
                        </tr>
                    </table>
                </div>

                <div id="div_event"></div>
            </div>
            <div class="modal-footer" style=" padding-top: 0;">
                <button class="btn btn-success" data-dismiss="modal" ng-click="selectedPricePlan = dirty.selectedPricePlan">เลือก</button>
                <button class="btn btn-cancel" data-dismiss="modal" ng-click="dirty.selectedPricePlan = selectedPricePlan">ยกเลิก</button>
            </div>
        </div>
    </div>
</div>
<div id="pricePlanModal" tabindex="-1" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Price Plan</h5>
                <div class="col-md-12">
                    <input type="text" placeholder="ค้นหา" ng-model="pricePlanFilter" class="form-control">
                </div>
            </div>
            <div class="modal-body">
                &nbsp;
                <div class="table-responsive">
                    <table class="table">
                        <tr class="row">
                            <th class="col-md-1"></th>
                            <th class="col-md-2"><span style="color:green;"> Price Plan</span></th>
                            <th class="col-md-7"><span style="color:green;"> รายการส่งเสริมการขาย</span></th>
                            <th class="col-md-2 text-right"><span style="color:green;"> RC</span></th>
                        </tr>
                        <tr class="row" ng-repeat="pp in pricePlanList">
                            <th class="col-md-1">
                                <input name="pricels" type="radio" ng-model="dirty.selectedPricePlan" ng-value="pp" />
                            </th>
                            <th class="col-md-2">{{pp.name}}</th>
                            <th class="col-md-7">{{pp.description}}</th>
                            <th class="col-md-2 text-right">{{pp.rc | number:2}}</th>
                        </tr>
                    </table>
                </div>
                <div id="div_event"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" data-dismiss="modal" ng-click="selectedPricePlan = dirty.selectedPricePlan">เลือก</button>
                <button class="btn btn-cancel" data-dismiss="modal" ng-click="dirty.selectedPricePlan = selectedPricePlan">ยกเลิก</button>
            </div>
        </div>
    </div>
</div>